# FiveCards Trainer

「좋은 승부를 거는 것은 좋은 기회를 아는 것이다.」 포커에서의 격언이고 인생에서의 격언이기도 합니다. 그렇지만 그 좋은 기회를 잘 파악하는 사람이 되기 위해서는 어떻게 훈련해야 할까요? 
The highest form of wisdom is knowing when to play and when to stay away.

## 서론

본 프로젝트는 ① 불확실성 속에서 ② 연속된 의사결정을 ③ 반복적으로 해야 하는 상황에 처한 사용자의 판단 능력을 효과적으로 향상시킬 수 있는 트레이너를 구현하는 것을 목표로 합니다.

이 세 가지 조건을 충족하는 상황은 매우 다양합니다. 실생활에서의 대표적인 예로는 '협상'이 있습니다. 일상적인 흥정에서부터 기업의 인수합병 협상까지 모두 불확실성 속에서 연속된 의사결정을 필요로 하며, 이러한 일들은 인생과 기업이 지속하는 한 반복적으로 발생합니다.

하지만 협상 등의 실생활 예시를 다루는 것이 궁극적인 목표임과 별개로 이를 시뮬레이션으로 구현해 컴퓨터 시스템과 연동되게끔 한 후 트레이너를 개발하는 것은 쉽지 않습니다. 따라서 프로젝트를 더 수월하게 진행하고 빠르게 실사례에 적용하기 위해 비교적 정리된 규칙을 가지고 있는 '게임'을 이용했고, 본 프로젝트에서는 이러한 조건을 만족하는 많은 게임 중 가장 단순한 '포커'를 선택했습니다.

## 파이브 카드 트레이너: 게임 플레이 중 실시간 의사결정 피드백

포커의 핵심 규칙은 패의 서열을 나타내는 '족보'를 비롯해 꽤나 복잡하지만, 플레이어가 조작할 수 있는 것은 매 라운드 단 3가지 밖에 없습니다. 플레이어는 해당 판의 승리를 포기하거나 (Fold), 판돈을 올리거나 (Raise), 다른 플레이어가 낸 판돈 만큼의 돈을 똑같이 걸어 승부를 보거나 (Call) 입니다. 셋 중 초보 포커 플레이어들에게 가장 복잡하게 여겨지는 것은 Raise 입니다. 초보 포커 플레이어는 언제 Raise를 해야하는지, 상대방의 Raise에 어떻게 대응해야하는지 잘 모르기 때문입니다.

많은 포커 플레이어들은 10판 중 1판, 혹은 매 판 한 번씩은 Raise를 합니다. 하지만 실제로 Raise가 유리하게 작용하는 경우는 드뭅니다. 대부분의 베팅 룰에서 Raise를 할 때는 현재 판돈 이상을 추가로 걸어야 하고, 이는 큰 부담이 되기 때문입니다. 이 데이터는 많은 플레이어가 사실 Raise를 하면 안 되는 상황에서 Raise를 하고 있음을 시사합니다.

웬만하면 Raise를 해서는 안 된다면, 그러면 언제 Raise를 해야 할까요? 가장 대표적인 경우는 (절대 흔하지 않지만) 5장 중 한 장만을 히든으로 가지는 파이브 카드 스터드에서, 본인은 액면 K 트리플을 가지고 있고 상대는 액면 J 포카드를 가지고 있으며, 2번 이상의 베팅 기회가 남아있으며 상대방은 2번의 Raise에 모두 응할 시 올인을 하게되는 상황입니다. 합리성을 가정하면 상대는 제가 Raise 할 때 Fold 할 수 밖에 없습니다. 만약 지면 다음 판에 참여해 복구할 수 있는 기회를 잃기 때문입니다. 상대 입장에서는 자신의 패가 잘 나타나 주었지만 상대의 패 때문에 Fold를 해야하는 상황인 것입니다.

이처럼 Raise 여부는 다른 플레이어의 패, 각 베팅 페이즈마다 얼마만큼의 돈이 걸렸는지, 현재 각 플레이어에게 남은 테이블 머니가 얼마인지 등을 고려해 결정해야 합니다. 물론 이 모든 것을 계산적으로 고려하기는 어렵습니다. 시간 제한도 있고, 노련한 플레이어들은 상대방의 고민하는 시간도 데이터로 삼아 패를 추정하기 때문입니다. 결국 자신만의 기준을 만들고 반복 숙달해 체화해야 합니다.

본 프로젝트에서 개발한 Trainer는 이 부분에서 플레이어에게 도움을 제공하며 플레이어가 데이터에 기반한 감을 날카롭게 다듬을 수 있게 돕습니다. 플레이어가 실제로 봇과 게임을 해보면서, 직전의 의사결정은 어떤 관점에서 무모한지 또는 우둔한지 확률에 기반해 구체적으로 피드백 받을 수 있으며, 자신이 고려하지 못한 경우의 수를 제공받아 자신의 판단이 경솔했음을 확인할 수 있습니다. 또한 봇의 의사결정 근거를 확인하며 많은 경우를 학습하고 빠르게 성장할 수 있습니다.

## 적용한 포커 규칙 등 세부 사항
본 프로젝트는 파이브 카드 스터드와 파이브 카드 드로우 룰을 따릅니다. 포커는 룰에 따라 변종이 다양합니다. 세븐 포커나 홀덤 등 일반적으로 즐겨지는 게임도 구현할 수 있었으나, 구현 과정에서의 편의와 Trainer가 과도하게 복잡한 전략을 고려하느라 적절한 피드백을 제공하지 못하는 것을 방지하기 위해 가장 단순한 버전의 게임 룰을 선정하였습니다. 봇과 트레이너는 ChatGPT API(GPT-4o)로 구현되었습니다.

## 사용 기술 스택
Frontend: React / Backend: Express, Prisma, MySQL
